---
title: "ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’ä½¿ã£ã¦ã¿ã‚ˆã†(BASIC èªè¨¼)"
free: true
---

# ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’ä½¿ã£ã¦ã¿ã‚ˆã†(BASIC èªè¨¼)

ä»Šã®`whoami`ã¯ä½•ã®èªè¨¼ã‚‚ãªãã‚¢ã‚¯ã‚»ã‚¹ã§ãã¦ã„ã¾ã™ãŒã€ã“ã¡ã‚‰ã« BASIC èªè¨¼ã‚’ã‹ã‘ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã¡ã‚‰ã‚’å®Ÿç¾ã™ã‚‹æ©Ÿèƒ½ãŒ Traefik ã§ã¯ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¨ã„ã‚ã‚Œã‚‹æ©Ÿèƒ½ã§ã™ã€‚

![](https://doc.traefik.io/traefik/assets/img/middleware/overview.png)
_<https://doc.traefik.io/traefik/> ã‹ã‚‰å¼•ç”¨ã€‚_

å…¬å¼ã®å›³ã®ã‚ˆã†ã«ã€ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã¨ã‚µãƒ¼ãƒ“ã‚¹ã®é–“ã«ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ãŒæŒŸã¾ã£ã¦ã„ã¾ã™ã€‚ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã§ã¯ä»Šå›ã®ã‚ˆã†ãª BASIC èªè¨¼ã‚„é€šä¿¡åˆ¶å¾¡ç­‰ã€æŒ¯ã‚Šåˆ†ã‘ã‚‹å‰ã«å®Ÿæ–½ã—ãŸã„å‡¦ç†ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

## BASIC èªè¨¼ç”¨ã® ID ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ä½œæˆ

htpasswd ã§ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
ID ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¨ã‚‚ã«"traefik"ã¨ã—ã¾ã™ã€‚

```bash
htpasswd -nb traefik traefik
```

ç”Ÿæˆã•ã‚ŒãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ compose ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¼‰ã—ã¾ã™ã€‚

```text
traefik:$apr1$a47tjolc$OCXnigWt3/xC3wLWFfCWb.
```

:::message
ğŸ‘†ã®ãƒãƒƒã‚·ãƒ¥å€¤ã¯ãƒ€ãƒŸãƒ¼ã§ã™ã€‚ä½¿ç”¨ã—ãªã„ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚
:::

æ¬¡ã« compose ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’è¨˜è¼‰ã—ã¦ã„ãã¾ã™ã€‚

```yaml:compose.yml
services:
  whoami:
    image: traefik/whoami
    container_name: whoami

    labels:
      traefik.enable: true
      traefik.http.routers.whoami.rule: Host(`whoami.your.domain`)
      traefik.http.routers.whoami.entrypoints: web
      traefik.http.routers.whoami.middlewares: auth #è¿½åŠ 
      traefik.http.middlewares.auth.basicauth.users: traefik:$$apr1$$a47tjolc$$ORXnihWt3/xC3wLWFfCWb. #è¿½åŠ 
    restart: always
    networks:
      - traefik-network
networks:
  traefik-network:
    external: true

```

è¿½åŠ ã—ãŸå†…å®¹ã‚’èª¬æ˜ã—ã¾ã™ã€‚

### traefik.http.routers.whoami.middlewares

```yaml
traefik.http.routers.whoami.middlewares: auth
```

auth ã¨ã„ã†åå‰ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’ whoami ã§ä½¿ã†ã“ã¨ã‚’å®£è¨€ã—ã¦ã„ã¾ã™ã€‚

### traefik.http.middlewares.auth.basicauth.users

```yaml
traefik.http.middlewares.auth.basicauth.users: traefik:$$apr1$$a47tjolc$$ORXnihWt3/xC3wLWFfCWb.
```

æŒ‡å®šã—ãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ BASIC èªè¨¼ã§ä½¿ã†ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚ã“ã“ã§æ°—ã‚’ã¤ã‘ã‚‹ç‚¹ã¯ã€`$`ã«ã¤ã„ã¦ã¯ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‚ˆã†ã§ã€`$$`ã¨è¡¨è¨˜ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã‚Œã§ã€`docker compose restart`ã—ã¦ BASIC èªè¨¼ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸã§ã™ã€‚

![](/images/basic.png)
_BASIC èªè¨¼ç”»é¢ä¾‹_
